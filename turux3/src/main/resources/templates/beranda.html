<!-- beranda.html -->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="Turu.ico" type="image/x-icon" />
    <!-- Logo/Icon Web -->
    <title>ðŸ¤¤- Beranda</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
    <!-- Library CSS Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" />
    <!-- Icon Asset -->
    <link rel="stylesheet" href="css/style.css" />
    <!-- Style Utama -->
  </head>
  <body>
    <!-- Fixed Header -->
    <div class="canvas-mobile">
      <!-- Header Status -->
      <header class="header">
        <div class="date" id="currentDate">[Tanggal]</div>
        <div class="time" id="currentTime">[WIB]</div>
      </header>
      <!-- CONTENT PAGE -->
      <div class="content">
        <form action="/beranda/toggle-button" method="post">
            <button id="turu-button" type="submit" class="turu-button" th:classappend="${buttonClass}">
                <i th:class="'bi ' + ${buttonIcon}"></i>
                <span th:text="${buttonLabel}"></span>
            </button>
        </form>        
        
        <!-- Stopwatch Button -->
        <button id="stopwatchBtn" class="stopwatch-button">START</button>

        <!-- Result Display -->
        <div class="result" id="resultDisplay">Elapsed Time: 0 hrs 0 secs</div>
        <div class="result" id="timestampDisplay">Timestamp: -</div>

        <!-- Username greeting -->
        <br /><br />
        <p>
          <span class="greeting" th:text="${sapa}">Sapaan, </span>
          <span class="nama" th:text="${nama}">Nama</span>
        </p>

        <!-- Statistik Tidur Chart -->
        <!-- Chart.js CDN -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

        <!-- Canvas untuk Chart -->
        <div class="container mt-4">
          <h5>Statistik Tidur Mingguan</h5>
          <canvas id="sleepChart"></canvas>
        </div>
      </div>

      <!-- Sticky Bottom Navbar -->
      <nav class="navbar navbar-expand navbar-dark">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link active" th:href="@{/beranda}">
              <span class="bi bi-grid-fill nav-icon"></span>
              Beranda
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" th:href="@{/radio}">
              <i class="bi bi-music-note nav-icon"></i>
              Radio
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" th:href="@{/akun}">
              <i class="bi bi-person-fill nav-icon"></i>
              Akun
            </a>
          </li>
        </ul>
      </nav>
    </div>

    <!-- Chart.js Script -->
    <script th:inline="javascript">
        /*<![CDATA[*/
        const sleepStats = /*[[${sleepStats}]]*/ {};
        const days = ["S", "S", "R", "K", "J", "S", "M"];
        const sleepData = days.map(day => sleepStats[day] || 0);

        const ctx = document.getElementById('sleepChart').getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: days,
                datasets: [{
                    label: 'Durasi Tidur (menit)',
                    data: sleepData,
                    backgroundColor: 'rgba(75, 192, 192, 0.6)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Durasi (menit)'
                        }
                    }
                }
            }
        });
        /*]]>*/
    </script>

    <script src="js/scriptHeader.js"></script>
    <script src="js/scriptBeranda.js"></script>
    <script src="js/scriptRadio.js"></script>
  </body>
</html>
